<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>covtrack - Home</title>
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">

    <!-- CSS Reset -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">

    <!-- Milligram CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">

</head>
<body>
    <h1>Willkommen</h1>
    <p>an der HTL Leonding</p>
    <hr>
    <h2>Bitte registrieren Sie sich:</h2>
    <form method="post" action="/api/listentry" id="reg-form">
        <fieldset>
            <label for="firstName">Vorname</label>
            <input type="text" autocomplete="off" name="first_name" id="firstName" placeholder="First Name">
            <label for="lastName">Nachname</label>
            <input type="text" autocomplete="off" name="last_name" id="lastName" placeholder="Last Name">
            <label for="email">Email</label>
            <input type="email" autocomplete="off" id="email" name="email" placeholder="Email"/>
            <label for="phone">Telefon</label>
            <input type="tel" autocomplete="off" name="telephoneNo" id="phone" placeholder="Phone Number">
            <div class="row">
            <input type="button" autocomplete="off" name="next" class="next action-button" id="action-button"
                   value="Send"/>
            </div>
        </fieldset>
    </form>
    <small>v 1.0.1</small>
    <hr>
    <h2>Logged visitors</h2>
    <iframe src="/api/listentry/html" style="width: 100%; border: 0;"></iframe>
    <script>
        if(localStorage.getItem('first') !== null) {
            document.getElementById('firstName').value = localStorage.getItem('first');
            document.getElementById('lastName').value = localStorage.getItem('last');
            document.getElementById('email').value = localStorage.getItem('email');
            document.getElementById('phone').value = localStorage.getItem('phone');
        }

        document.getElementById('action-button').addEventListener("click", function() {
            submitForm();
        });

        function submitForm() {
                localStorage.setItem('first', document.getElementById('firstName').value);
                localStorage.setItem('last', document.getElementById('lastName').value);
                localStorage.setItem('email', document.getElementById('email').value);
                localStorage.setItem('phone', document.getElementById('phone').value);
                document.getElementById('reg-form').submit();
        }
    </script>
</body>
</html>