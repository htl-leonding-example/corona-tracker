<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>covtrack - Home</title>
</head>
<body>
    <h1>CovTrack</h1>
    <p>Welcome to the CovTrack main page.</p>
    <hr>
    <h2>Log new visitor</h2>
    <form method="post" action="/api/listentry" id="reg-form">
        <input type="text" autocomplete="off" name="first_name" id = "firstName" placeholder="First Name">
        <input type="text" autocomplete="off" name="last_name" id = "lastName" placeholder="Last Name">
        <input type="email" autocomplete="off" id="email" name="email" placeholder="Email" />
        <input type="tel" autocomplete="off" name="telephoneNo" id="phone" placeholder="Phone Number">
        <input type="button" autocomplete="off" name="next" class="next action-button" id="action-button" value="Send" />
    </form>
    <hr>
    <h2>Logged visitors</h2>
    <iframe src="/api/listentry/html" style="width: 100%; border: 0;"></iframe>
    <script>
        if(localStorage.getItem('first') !== null) {
            document.getElementById('firstName').value = localStorage.getItem('first');
            document.getElementById('lastName').value = localStorage.getItem('last');
            document.getElementById('email').value = localStorage.getItem('email');
            document.getElementById('phone').value = localStorage.getItem('phone');
        }

        document.getElementById('action-button').addEventListener("click", function() {
            submitForm();
        });

        function submitForm() {
                localStorage.setItem('first', document.getElementById('firstName').value);
                localStorage.setItem('last', document.getElementById('lastName').value);
                localStorage.setItem('email', document.getElementById('email').value);
                localStorage.setItem('phone', document.getElementById('phone').value);
                document.getElementById('reg-form').submit();
        }
    </script>
</body>
</html>